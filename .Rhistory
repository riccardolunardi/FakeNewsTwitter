select(campi_utili) %>%
filter(!is_retweet)
retweets_with_number <- retweets %>%
count(retweet_status_id,retweet_user_id) %>%
arrange(desc(n))
retweets_with_number
tweets_with_retweet_number <- inner_join(tweets$status_id, retweets_with_number$retweet_status_id)
retweets_with_number
tweets_with_retweet_number <- inner_join(tweets$status_id, retweets_with_number$retweet_status_id)
as.character
as.character
df3$retweet_status_id = as.numeric(as.character(df3$retweet_status_id))
#Ottenere solo retweet
retweets <- df3 %>%
select(campi_utili) %>%
filter(is_retweet)
#Ottenere solo tweet
tweets <- df3 %>%
select(campi_utili) %>%
filter(!is_retweet)
tweets
retweets
retweets
campi_utili = c("user_id","status_id","created_at","screen_name","text",
"urls_url", "urls_expanded_url","retweet_status_id","retweet_text",
,"retweet_user_id","is_retweet")
campi_utili = c("user_id","status_id","created_at","screen_name","text",
"urls_url", "urls_expanded_url","retweet_status_id","retweet_text",
"retweet_user_id","is_retweet")
library(dplyr)
df3$status_id = as.numeric(as.character(df3$status_id))
df3$retweet_status_id = as.numeric(as.character(df3$retweet_status_id))
#Ottenere solo retweet
retweets <- df3 %>%
select(campi_utili) %>%
filter(is_retweet)
#Ottenere solo tweet
tweets <- df3 %>%
select(campi_utili) %>%
filter(!is_retweet)
retweets
retweets_with_number <- retweets %>%
count(retweet_status_id,retweet_user_id) %>%
arrange(desc(n))
retweets_with_number
tweets_with_retweet_number <- inner_join(tweets$status_id, retweets_with_number$retweet_status_id)
df3$status_id = as.double(as.character(df3$status_id))
df3$status_id = as.double(as.character(df3$status_id))
df3$retweet_status_id = as.double(as.character(df3$retweet_status_id))
#Ottenere solo retweet
retweets <- df3 %>%
select(campi_utili) %>%
filter(is_retweet)
#Ottenere solo tweet
tweets <- df3 %>%
select(campi_utili) %>%
filter(!is_retweet)
retweets
retweets_with_number <- retweets %>%
count(retweet_status_id,retweet_user_id) %>%
arrange(desc(n))
retweets_with_number
tweets_with_retweet_number <- inner_join(tweets$status_id, retweets_with_number$retweet_status_id)
retweets_with_number
retweets
tweets
tweets_with_retweet_number <- inner_join(tweets$status_id, retweets_with_number$retweet_status_id)
tweets_with_retweet_number <- inner_join(retweets_with_number$retweet_status_id, tweets$status_id)
tweets_with_retweet_number <- inner_join(tweets$status_id, retweets_with_number$retweet_status_id)
tweets_with_retweet_number <- join(tweets$status_id, retweets_with_number$retweet_status_id)
tweets_with_retweet_number <- right_join(tweets$status_id, retweets_with_number$retweet_status_id)
tweets$status_id
tweets_with_retweet_number <- right_join(tweets, retweets_with_number, by=c("status_id", "retweet_status_id"))
library(dplyr)
#Ottenere solo retweet
retweets <- df3 %>%
select(campi_utili) %>%
filter(is_retweet)
#Ottenere solo tweet
tweets <- df3 %>%
select(campi_utili) %>%
filter(!is_retweet)
retweets
retweets_with_number <- retweets %>%
count(retweet_status_id,retweet_user_id) %>%
arrange(desc(n))
tweets$status_id
tweets$status_id
retweets_with_number$retweet_status_id
tweets_with_retweet_number <- right_join(tweets, retweets_with_number, by=c("status_id", "retweet_status_id"))
tweets_with_retweet_number <- right_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
tweets_with_retweet_number
VieW(tweets_with_retweet_number)
library(dplyr)
#df3$status_id = as.double(as.character(df3$status_id))
#df3$retweet_status_id = as.double(as.character(df3$retweet_status_id))
#Ottenere solo retweet
retweets <- df3 %>%
select(campi_utili) %>%
filter(is_retweet)
#Ottenere solo tweet
tweets <- df3 %>%
select(campi_utili) %>%
filter(!is_retweet)
retweets_with_number <- retweets %>%
count(retweet_status_id,retweet_user_id) %>%
arrange(desc(n))
tweets_with_retweet_number <- right_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
tweets_with_retweet_number
VieW(tweets_with_retweet_number)
View(tweets_with_retweet_number)
tweets_with_retweet_number <- left_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
tweets_with_retweet_number
View(tweets_with_retweet_number)
retweets_with_number
tweets_with_retweet_number <- inner_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
tweets_with_retweet_number
View(tweets_with_retweet_number)
tweets_with_retweet_number <- left_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
tweets_with_retweet_number
#Ottenere solo retweet
retweets <- df3 %>%
select(campi_utili) %>%
filter(is_retweet)
#Ottenere solo tweet
tweets <- df3 %>%
select(campi_utili) %>%
filter(!is_retweet)
retweets_with_number <- retweets %>%
count(retweet_status_id,retweet_user_id) %>%
arrange(desc(n))
retweets_with_number
tweets_with_retweet_number <- left_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
tweets_with_retweet_number
View(tweets_with_retweet_number)
View(tweets_with_retweet_number)
df3 <- rbind(r_tweet6)
campi_utili = c("user_id","status_id","created_at","screen_name","text",
"urls_url", "urls_expanded_url","retweet_status_id","retweet_text",
"retweet_user_id","is_retweet")
campi_utili = c("user_id","status_id","created_at","screen_name","text",
"urls_url", "urls_expanded_url","retweet_status_id","retweet_text",
"retweet_user_id","is_retweet")
AGGIUNTA CONTEGGIO RETWEET
library(dplyr)
#Ottenere solo retweet
retweets <- df3 %>%
select(campi_utili) %>%
filter(is_retweet)
retweets_with_number <- retweets %>%
count(retweet_status_id,retweet_user_id) %>%
arrange(desc(n))
retweets_with_number
tweets_with_retweet_number <- left_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
retweets_with_number
tweets_with_retweet_number <- left_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
tweets
library(rtweet)
#CODICE DI twitter_stream.R
#CODICE DELL'UNIONE DEI JSON
r_tweet6 <- parse_stream("data/day2020-04-26.json")
df3 <- rbind(r_tweet6)
campi_utili = c("user_id","status_id","created_at","screen_name","text",
"urls_url", "urls_expanded_url","retweet_status_id","retweet_text",
"retweet_user_id","is_retweet")
library(dplyr)
#df3$status_id = as.double(as.character(df3$status_id))
#df3$retweet_status_id = as.double(as.character(df3$retweet_status_id))
#Ottenere solo retweet
retweets <- df3 %>%
select(campi_utili) %>%
filter(is_retweet)
#Ottenere solo tweet
tweets <- df3 %>%
select(campi_utili) %>%
filter(!is_retweet)
tweets
retweets_with_number <- retweets %>%
count(retweet_status_id,retweet_user_id) %>%
arrange(desc(n))
retweets_with_number
tweets_with_retweet_number <- left_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
tweets_with_retweet_number
View(tweets_with_retweet_number)
View(df3)
tweets_with_retweet_number <- right_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
View(tweets_with_retweet_number)
tweets_with_retweet_number <- inner_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
tweets_with_retweet_number <- outer_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
tweets_with_retweet_number <- full_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
retweets_with_number <- retweets %>%
count(retweet_status_id,retweet_user_id) %>%
arrange(desc(n))
retweets_with_number
tweets_with_retweet_number <- left_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id")) &>&
tweets_with_retweet_number <- left_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
View(tweets_with_retweet_number)
tweets_with_retweet_number <- inner_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
#Ottenere solo tweet
tweets <- df3 %>%
select(campi_utili, -retweet_user_id, retweet_text,retweet_status_id) %>%
filter(!is_retweet)
retweets_with_number <- retweets %>%
count(retweet_status_id,retweet_user_id) %>%
arrange(desc(n))
retweets_with_number
tweets_with_retweet_number <- inner_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
#Ottenere solo tweet
tweets <- df3 %>%
select(campi_utili, -retweet_user_id, -retweet_text, -retweet_status_id) %>%
filter(!is_retweet)
retweets_with_number <- retweets %>%
count(retweet_status_id,retweet_user_id) %>%
arrange(desc(n))
retweets_with_number
tweets_with_retweet_number <- inner_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
tweets_with_retweet_number <- inner_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id")) %>%
select(-retweet_user_id)
tweets_with_retweet_number <- left_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id")) %>%
select(-retweet_user_id)
View(tweets_with_retweet_number)
tweets_with_retweet_number <- left_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id")) %>%
select(-retweet_user_id)
View(tweets_with_retweet_number)
tweets_with_retweet_number <- right_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id")) %>%
select(-retweet_user_id)
retweets_with_number
tweets_with_retweet_number <- ful_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
View(tweets_with_retweet_number)
tweets_with_retweet_number <- full_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
retweets
retweets %>%
group_by(retweet_status_id)
summarise(retweet_counter = n())
mutate(retweet_counter = n())
retweets %>%
group_by(retweet_status_id)
mutate(retweet_counter = n())
retweets
retweets %>%
group_by(retweet_status_id) %>%
mutate(retweet_counter = n())
retweets_with_number <- retweets %>%
select(retweet_status_id,retweet_text,retweet_user_id,is_retweet) %>%
group_by(retweet_status_id) %>%
mutate(retweet_counter = n())
retweets_with_number <- retweets %>%
select(retweet_status_id,retweet_text,retweet_user_id,is_retweet) %>%
group_by(retweet_status_id) %>%
mutate(retweet_counter = n())
retweets_with_number <- retweets %>%
select(retweet_status_id,retweet_text,retweet_user_id,is_retweet) %>%
group_by(retweet_status_id) %>%
mutate(retweet_counter = n()) %>%
arrange(desc(n))
retweets %>%
select(retweet_status_id,retweet_text,retweet_user_id,is_retweet) %>%
group_by(retweet_status_id) %>%
mutate(retweet_counter = n())
retweets_with_number <- retweets %>%
select(retweet_status_id,retweet_text,retweet_user_id,is_retweet) %>%
group_by(retweet_status_id) %>%
mutate(retweet_counter = n()) %>%
arrange(desc(n))
retweets_with_number <- retweets %>%
select(retweet_status_id,retweet_text,retweet_user_id,is_retweet) %>%
group_by(retweet_status_id) %>%
mutate(retweet_counter = n()) %>%
arrange(desc(retweet_counter))
retweets_with_number
tweets_with_retweet_number <- full_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id")) %>%
if_else(is.na(user_id), user_id <- retweet_user_id)
tweets_with_retweet_number <- full_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id")) %>%
ifelse(is.na(user_id), user_id <- retweet_user_id)
tweets_with_retweet_number %>%
mutate(user_id = ifelse(is.na(user_id), user_id <- retweet_user_id))
tweets_with_retweet_number %>%
mutate(user_id = if(is.na(user_id), user_id <- retweet_user_id))
tweets_with_retweet_number %>%
mutate(user_id = ifelse(is.na(user_id), retweet_user_id))
tweets_with_retweet_number %>%
mutate(tmp_user_id = ifelse(is.na(user_id), retweet_user_id, user_id))
View(tweets_with_retweet_number)
tweets_with_retweet_number <- tweets_with_retweet_number %>%
mutate(tmp_user_id = ifelse(is.na(user_id), retweet_user_id, user_id))
View(tweets_with_retweet_number)
library(dplyr)
#df3$status_id = as.double(as.character(df3$status_id))
#df3$retweet_status_id = as.double(as.character(df3$retweet_status_id))
#Ottenere solo retweet
retweets <- df3 %>%
select(campi_utili) %>%
filter(is_retweet)
retweets
#Ottenere solo tweet
tweets <- df3 %>%
select(campi_utili, -retweet_user_id, -retweet_text, -retweet_status_id) %>%
filter(!is_retweet)
retweets_with_number <- retweets %>%
select(retweet_status_id,retweet_text,retweet_user_id,is_retweet) %>%
group_by(retweet_status_id) %>%
mutate(retweet_counter = n()) %>%
arrange(desc(retweet_counter))
retweets_with_number
tweets_with_retweet_number <- full_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
tweets_with_retweet_number <- tweets_with_retweet_number %>%
mutate(tmp_user_id = ifelse(is.na(user_id), retweet_user_id, user_id))
View(tweets_with_retweet_number)
library(dplyr)
#df3$status_id = as.double(as.character(df3$status_id))
#df3$retweet_status_id = as.double(as.character(df3$retweet_status_id))
#Ottenere solo retweet
retweets <- df3 %>%
select(campi_utili) %>%
filter(is_retweet)
retweets
#Ottenere solo tweet
tweets <- df3 %>%
select(campi_utili, -retweet_user_id, -retweet_text, -retweet_status_id) %>%
filter(!is_retweet)
retweets_with_number <- retweets %>%
select(retweet_status_id,retweet_text,retweet_user_id,is_retweet) %>%
group_by(retweet_status_id) %>%
mutate(retweet_counter = n()) %>%
arrange(desc(retweet_counter))
retweets_with_number
tweets_with_retweet_number <- full_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
tweets_with_retweet_number <- tweets_with_retweet_number %>%
mutate(tmp_user_id = ifelse(is.na(user_id), retweet_user_id, user_id))
View(tweets_with_retweet_number)
retweets_with_number <- retweets %>%
select(retweet_status_id,retweet_text,retweet_user_id,is_retweet) %>%
group_by(retweet_status_id) %>%
mutate(retweet_counter = n()) %>%
arrange(desc(retweet_counter))
View(tweets_with_retweet_number)
tweets_with_retweet_number <- full_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
tweets_with_retweet_number <- tweets_with_retweet_number %>%
mutate(tmp_user_id = ifelse(is.na(user_id), retweet_user_id, user_id))
tweets_with_retweet_number <- tweets_with_retweet_number %>%
mutate(tmp_status_id = ifelse(is.na(user_id), retweet_status_id, status_id),
tmp_retweet_text = ifelse(is.na(user_id), retweet_text, text),
tmp_retweet_user_id = ifelse(is.na(user_id), retweet_user_id, user_id))
tweets_with_retweet_number <- tweets_with_retweet_number %>%
mutate(tmp_retweet_text = ifelse(is.na(user_id), retweet_text, text),
tmp_retweet_user_id = ifelse(is.na(user_id), retweet_user_id, user_id))
tweets_with_retweet_number <- tweets_with_retweet_number %>%
mutate(tmp_tweet_text = ifelse(is.na(text), retweet_text, text),
tmp_tweet_user_id = ifelse(is.na(user_id), retweet_user_id, user_id)) %>%
select(-user_id,-text) %>%
rename(user_id=tmp_tweet_user_id, text=tmp_tweet_text)
library(dplyr)
#df3$status_id = as.double(as.character(df3$status_id))
#df3$retweet_status_id = as.double(as.character(df3$retweet_status_id))
#Ottenere solo retweet
retweets <- df3 %>%
select(campi_utili) %>%
filter(is_retweet)
retweets
#Ottenere solo tweet
tweets <- df3 %>%
select(campi_utili, -retweet_user_id, -retweet_text, -retweet_status_id) %>%
filter(!is_retweet)
retweets_with_number <- retweets %>%
select(retweet_status_id,retweet_text,retweet_user_id,is_retweet) %>%
group_by(retweet_status_id) %>%
mutate(retweet_counter = n()) %>%
arrange(desc(retweet_counter))
retweets_with_number
tweets_with_retweet_number <- full_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
tweets_with_retweet_number <- tweets_with_retweet_number %>%
mutate(tmp_tweet_text = ifelse(is.na(text), retweet_text, text),
tmp_tweet_user_id = ifelse(is.na(user_id), retweet_user_id, user_id)) %>%
select(-user_id,-text) %>%
rename(user_id=tmp_tweet_user_id, text=tmp_tweet_text)
#View(tweets_with_retweet_number)
tweets_with_retweet_number <- tweets_with_retweet_number %>%
mutate(tmp_tweet_text = ifelse(is.na(text), retweet_text, text),
tmp_tweet_user_id = ifelse(is.na(user_id), retweet_user_id, user_id)) %>%
select(-user_id,-text,is_retweet.x,is_retweet.y,-retweet_text,-retweet_user_id) %>%
rename(user_id=tmp_tweet_user_id, text=tmp_tweet_text) %>%
arrange(status_id,user_id,created_at,screen_name,text)
retweets_with_number <- retweets %>%
select(retweet_status_id,retweet_created_at,retweet_text,retweet_user_id,is_retweet) %>%
group_by(retweet_status_id) %>%
mutate(retweet_counter = n()) %>%
arrange(desc(retweet_counter))
View(df3)
#Ottenere solo retweet
retweets <- df3 %>%
select(campi_utili,retweet_created_at) %>%
filter(is_retweet)
retweets
#Ottenere solo tweet
tweets <- df3 %>%
select(campi_utili, -retweet_user_id, -retweet_text, -retweet_status_id) %>%
filter(!is_retweet)
retweets_with_number <- retweets %>%
select(retweet_status_id,retweet_created_at,retweet_text,retweet_user_id,is_retweet) %>%
group_by(retweet_status_id) %>%
mutate(retweet_counter = n()) %>%
arrange(desc(retweet_counter))
tweets_with_retweet_number <- tweets_with_retweet_number %>%
mutate(tmp_tweet_text = ifelse(is.na(text), retweet_text, text),
tmp_created_at = ifelse(is.na(created_at), retweet_created_at, created_at),
tmp_tweet_user_id = ifelse(is.na(user_id), retweet_user_id, user_id)) %>%
select(-user_id,-text,is_retweet.x,is_retweet.y,-retweet_text,-retweet_user_id) %>%
rename(user_id=tmp_tweet_user_id, text=tmp_tweet_text) %>%
arrange(status_id,user_id,created_at,screen_name,text)
tweets_with_retweet_number <- full_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
tweets_with_retweet_number <- tweets_with_retweet_number %>%
mutate(tmp_tweet_text = ifelse(is.na(text), retweet_text, text),
tmp_created_at = ifelse(is.na(created_at), retweet_created_at, created_at),
tmp_tweet_user_id = ifelse(is.na(user_id), retweet_user_id, user_id)) %>%
select(-user_id,-text,is_retweet.x,is_retweet.y,-retweet_text,-retweet_user_id) %>%
rename(user_id=tmp_tweet_user_id, text=tmp_tweet_text) %>%
arrange(status_id,user_id,created_at,screen_name,text)
library(dplyr)
#df3$status_id = as.double(as.character(df3$status_id))
#df3$retweet_status_id = as.double(as.character(df3$retweet_status_id))
#Ottenere solo retweet
retweets <- df3 %>%
select(campi_utili,retweet_created_at) %>%
filter(is_retweet)
retweets
#Ottenere solo tweet
tweets <- df3 %>%
select(campi_utili, -retweet_user_id, -retweet_text, -retweet_status_id) %>%
filter(!is_retweet)
retweets_with_number <- retweets %>%
select(retweet_status_id,retweet_created_at,retweet_text,retweet_user_id,is_retweet) %>%
group_by(retweet_status_id) %>%
mutate(retweet_counter = n()) %>%
arrange(desc(retweet_counter))
retweets_with_number
tweets_with_retweet_number <- full_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
tweets_with_retweet_number <- tweets_with_retweet_number %>%
mutate(tmp_tweet_text = ifelse(is.na(text), retweet_text, text),
tmp_created_at = ifelse(is.na(created_at), retweet_created_at, created_at),
tmp_tweet_user_id = ifelse(is.na(user_id), retweet_user_id, user_id)) %>%
select(-user_id,-text,is_retweet.x,is_retweet.y,-retweet_text,-retweet_user_id) %>%
rename(user_id=tmp_tweet_user_id, text=tmp_tweet_text) %>%
arrange(status_id,user_id,created_at,screen_name,text)
#View(tweets_with_retweet_number)
tweets_with_retweet_number <- tweets_with_retweet_number %>%
mutate(tmp_tweet_text = ifelse(is.na(text), retweet_text, text),
tmp_created_at = ifelse(is.na(created_at), retweet_created_at, created_at),
tmp_tweet_user_id = ifelse(is.na(user_id), retweet_user_id, user_id)) %>%
select(-user_id, -text, -is_retweet.x, -is_retweet.y, -retweet_text, -retweet_user_id, -retweet_created_at) %>%
rename(user_id=tmp_tweet_user_id, text=tmp_tweet_text, created_at=tmp_created_at) %>%
arrange(status_id, user_id, created_at, screen_name, text)
tweets_with_retweet_number <- full_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
tweets_with_retweet_number <- tweets_with_retweet_number %>%
mutate(tmp_tweet_text = ifelse(is.na(text), retweet_text, text),
tmp_created_at = ifelse(is.na(created_at), retweet_created_at, created_at),
tmp_tweet_user_id = ifelse(is.na(user_id), retweet_user_id, user_id)) %>%
select(-user_id, -text, -is_retweet.x, -is_retweet.y, -retweet_text, -retweet_user_id, -retweet_created_at) %>%
rename(user_id=tmp_tweet_user_id, text=tmp_tweet_text, created_at=tmp_created_at) %>%
arrange(status_id, user_id, created_at, screen_name, text)
tweets_with_retweet_number <- tweets_with_retweet_number %>%
mutate(tmp_tweet_text = ifelse(is.na(text), retweet_text, text),
tmp_created_at = ifelse(is.na(created_at), retweet_created_at, created_at),
tmp_tweet_user_id = ifelse(is.na(user_id), retweet_user_id, user_id)) %>%
select(-user_id, -created_at, -text, -is_retweet.x, -is_retweet.y, -retweet_text, -retweet_user_id, -retweet_created_at) %>%
rename(user_id=tmp_tweet_user_id, text=tmp_tweet_text, created_at=tmp_created_at) %>%
arrange(status_id, user_id, created_at, screen_name, text)
tweets_with_retweet_number <- full_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
tweets_with_retweet_number <- tweets_with_retweet_number %>%
mutate(tmp_tweet_text = ifelse(is.na(text), retweet_text, text),
tmp_created_at = ifelse(is.na(created_at), retweet_created_at, created_at),
tmp_tweet_user_id = ifelse(is.na(user_id), retweet_user_id, user_id)) %>%
select(-user_id, -created_at, -text, -is_retweet.x, -is_retweet.y, -retweet_text, -retweet_user_id, -retweet_created_at) %>%
rename(user_id=tmp_tweet_user_id, text=tmp_tweet_text, created_at=tmp_created_at) %>%
arrange(status_id, user_id, created_at, screen_name, text)
View(tweets_with_retweet_number)
retweets_with_number <- retweets %>%
select(retweet_status_id,retweet_created_at,retweet_text,retweet_user_id,is_retweet) %>%
group_by(retweet_status_id) %>%
mutate(retweet_counter = n()) %>%
arrange(desc(retweet_counter))
retweets_with_number
tweets_with_retweet_number <- full_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
tweets_with_retweet_number <- tweets_with_retweet_number %>%
mutate(tmp_tweet_text = ifelse(is.na(text), retweet_text, text),
tmp_created_at = ifelse(is.na(created_at), retweet_created_at, created_at),
tmp_tweet_user_id = ifelse(is.na(user_id), retweet_user_id, user_id)) %>%
select(-user_id, -created_at, -text, -is_retweet.x, -is_retweet.y, -retweet_text, -retweet_user_id, -retweet_created_at) %>%
rename(user_id=tmp_tweet_user_id, text=tmp_tweet_text, created_at=tmp_created_at) %>%
arrange(status_id, user_id, created_at, screen_name, text)
tweets_with_retweet_number[c(0,7,6,1,5,2,3,4)]
View(tweets_with_retweet_number)
tweets_with_retweet_number[c(0,7,6,1,5,2,3,4)]
tweets_with_retweet_number <- tweets_with_retweet_number[c(0,7,6,1,5,2,3,4)]
tweets_with_retweet_number <- full_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
tweets_with_retweet_number <- tweets_with_retweet_number %>%
mutate(tmp_tweet_text = ifelse(is.na(text), retweet_text, text),
tmp_created_at = ifelse(is.na(created_at), retweet_created_at, created_at),
tmp_tweet_user_id = ifelse(is.na(user_id), retweet_user_id, user_id)) %>%
select(-user_id, -created_at, -text, -is_retweet.x, -is_retweet.y, -retweet_text, -retweet_user_id, -retweet_created_at) %>%
rename(user_id=tmp_tweet_user_id, text=tmp_tweet_text, created_at=tmp_created_at) %>%
arrange(status_id, user_id, created_at, screen_name, text)
tweets_with_retweet_number <- tweets_with_retweet_number[c(0,7,6,1,5,2,3,4)]
View(tweets_with_retweet_number)
tweets_with_retweet_number <- full_join(tweets, retweets_with_number, by=c("status_id" = "retweet_status_id"))
tweets_with_retweet_number <- tweets_with_retweet_number %>%
mutate(tmp_tweet_text = ifelse(is.na(text), retweet_text, text),
tmp_created_at = ifelse(is.na(created_at), retweet_created_at, created_at),
tmp_tweet_user_id = ifelse(is.na(user_id), retweet_user_id, user_id)) %>%
select(-user_id, -created_at, -text, -is_retweet.x, -is_retweet.y, -retweet_text, -retweet_user_id, -retweet_created_at) %>%
rename(user_id=tmp_tweet_user_id, text=tmp_tweet_text, created_at=tmp_created_at) %>%
arrange(status_id, user_id, created_at, screen_name, text)
tweets_with_retweet_number <- tweets_with_retweet_number[c(1,8,7,2,6,3,4,5)]
